# CH05（上）笔记卡 - 长三角大区-兆骐

**作者**：长三角大区——兆骐  
**提交时间**：2025-11-02 19:23:10

## 学习 MCP 开发的意义

- 从使用者转变为创造者，能更深入理解 MCP 工作原理、评判应用质量、识别局限性。
- 了解 MCP 最佳应用场景，探索未来发展方向，参与生态建设并寻找套利机会。

---

## AI 时代的高效学习方式

- 直接阅读官方文档（英文）可能门槛较高，推荐使用 AI 生成的个性化教程（如链接中的教程）。
- 掌握核心知识后，能更好地利用 AI 工具开发高质量应用。

---

## MCP 核心概念解析

### MCP 的价值

- **解决的问题**：工具割裂、执行效率低、缺乏统一标准的问题。
- **核心价值**：
  - 一次开发多平台通用
  - 工具与 AI 解耦
  - 易于测试调试

### 架构设计

**基于 Client-Server 模型**：
- **Client**（如 ChatGPT）调用 Server（开发者构建）
- 使用 JSON 格式的消息（请求、响应、通知）

**交互流程**：
```
握手（能力协商）→ 交互（调用工具/资源）→ 关闭连接
```

### 三大核心组件

#### 1. Tools（工具）

**作用**：执行操作（如计算、发邮件）

**实现方式**：通过 Python 函数 + 装饰器实现

**设计建议**：工具应精简明确，避免过多功能

#### 2. Resources（资源）

**作用**：只读数据（如文件、天气）

**特点**：
- 通过 URI 标识
- 支持订阅更新通知

**设计建议**：资源传输应优化（如传文件路径而非内容）

#### 3. Prompts（提示模板）

**作用**：预定义提示方案（如代码审查模板），提升调用规范性

### 能力协商

Client 与 Server 在握手阶段交换支持的功能列表。

---

## 实践：开发第一个 MCP Server

### 框架选择

使用 **FastMCP** 简化开发。

### 开发步骤

1. **安装 UV 环境管理工具**
2. **创建项目目录并初始化环境**
3. **安装 FastMCP 依赖**
4. **编写 Server 代码**
   - 定义工具和资源
   - 用装饰器声明
5. **启动 Server**（默认使用 Stdio 本地传输）

### 示例功能

#### 工具示例
- 字符串回显（echo）
- 加法计算（add）

#### 资源示例
- 读取文件内容（支持动态文件名）

### 测试方式

**方式一：在 Cursor IDE 中测试**
- 配置 MCP Server
- 对话测试功能

**方式二：使用官方 MCP Inspector 工具调试**
- 命令行启动
- 网页可视化操作

---

## 常见问题

### 环境问题
- 确保 Python 环境激活
- 路径正确配置

### 配置问题
- JSON 格式严格校验
- 注意引号、逗号

### 调试技巧
- 添加日志输出
- 使用 Inspector 工具排查

---

## 学习资源

- 官方文档
- 社区资源
- 个性化教程链接

